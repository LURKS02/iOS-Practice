# ARC(Automatic Reference Counting)

자동으로 메모리를 관리해주는 방식으로, 참조 카운팅이 0이 될 때 메모리에서 해제한다.<br>
클래스의 새로운 인스턴스를 만들 때 ARC는 인스턴스의 정보를 저장하기 위하여 메모리를 할당한다.<br>
이때 인스턴스가 더 이상 사용되지 않는다고 판단될 때, 즉 참조 카운팅이 0이 될 때 메모리를 해제한다.<br>
레퍼런스 프로퍼티에 인스턴스를 할당하면, 참조되는 프로퍼티 개수를 카운팅하여 모든 참조 변수가 인스턴스를 해제하기 전에는 인스턴스를 메모리에서 해제하지 않는다.<br>

```swift
class Person {
	let name: String
	init(name: String) {
		self.name = name
	}

	deinit() {
	}
}

var ref1: Person?
var ref2: Person?
var ref3: Person?

// 인스턴스를 생성하여 참조하고, 나머지 두 변수가 이를 참도하도록 하여 인스턴스에 대한 총 참조 횟수는 3이 된다.
ref1 = Person(name: “John”)
ref2 = ref1
ref3 = ref1

// 이때 Person 인스턴스에 대한 참조 횟수는 1(ref3)이므로 해지되지 않는다.
ref1 = nil
ref2 = nil

// Person 인스턴스를 참조하던 나머지 변수 ref3의 참조를 해지하면, 참조 횟수가 0이 되면서 ARC는 Person 인스턴스 메모리를 해지한다.
ref3 = nil
```

<br>

### ARC 및 Garbage Collection의 차이점
#### ARC
컴파일 시점에서 참조 카운팅이 이루어진다.<br>
컴파일 당시 이미 인스턴스의 해제 시점이 정해져 있어 인스턴스가 메모리에서 언제 해제될지 예측할 수 있다.<br>
컴파일 당시 인스턴스의 해제 시점이 정해져 있으므로 메모리 관리를 위한 시스템 자원을 추가할 필요가 없다.<br>
그러나 ARC의 작동 규칙을 잘 확인하지 않으면 인스턴스가 메모리에서 영원히 해제되지 않을 가능성도 있다.<br>

<br>

#### GC (Garbage Collection)
프로그램 동작 중 참조 카운팅이 이루어진다.<br>
상호 참조 상황 등의 복잡한 상황에도 인스턴스를 해제할 수 있는 가능성이 높다.<br>
프로그램 동작 외에 메모리 감시를 위한 추가 자원이 필요하므로 한정적인 자원 환경에서는 성능 저하가 발생할 수 있다.<br>
인스턴스가 정확히 언제 메모리에서 해제될지 예측하기 어렵다.<br>

